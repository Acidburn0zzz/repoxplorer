<%inherit file="layout.html" />

<div id="content">
 <h1>Project ${pid} details</h1>
 <div id="filters">
 <h2>Filters</h2>
 <span>From date: <input type="text" id="fromdatepicker"></span>
 <span>To date: <input type="text" id="todatepicker"></span>
 <input id="filter" type="button" value="Apply filter" />
 % if period[0] and period[1]:
  <p><b>The following project details are extracted from the period between ${period[0]} to ${period[1]}</b></p>
 % endif
 </div>
 <div id="infos">
  <h2>Project infos</h2>
  <div>Amount of sub-projects: ${subprojects}</div>
  <div>Amount of commits: ${commits_amount}</div>
  <div>Amount of authors: ${authors_amount}</div>
  <div>Project has been active for: ${duration}</div>
  <div>Date of first commits: ${first}</div>
  <div>Date of last commits: ${last}</div>
 </div>
 <div id="history">
  <h2>Commits history</h2>
  </div>
  <div id="topauthors">
  <h2>Top 25 authors by commit</h2>
  <div id="topauthors_pie">
  </div>
  <div id="topauthors_table">
   <table>
    <tr>
     <th>Amount</th>
     <th>Email</th>
     <th>Name</th>
    <tr>
    % for i in top_authors:
    <tr>
     <td>${i['amount']}</td>
     <td>${i['email']}</td>
     <td>${i['name']}</td>
    <tr>
    % endfor
   </table>
  </div>
 </div>
  <div id="topauthors_m">
  <h2>Top 25 authors by lines modified</h2>
  <div id="topauthors_m_pie">
  </div>
  <div id="topauthors_m_table">
   <table>
    <tr>
     <th>Amount</th>
     <th>Email</th>
     <th>Name</th>
    <tr>
    % for i in top_authors_modified:
    <tr>
     <td>${i['amount']}</td>
     <td>${i['email']}</td>
     <td>${i['name']}</td>
    <tr>
    % endfor
   </table>
  </div>
 </div>
 <div id="commits">
  <h2>Project commits</h2>
 </div>
</div>

<script type="text/javascript">
 var histo = jQuery.parseJSON('${histo}');
 var pie_top = jQuery.parseJSON('${top_authors_pie}');
 var pie_top_m = jQuery.parseJSON('${top_authors_modified_pie}');
 gen_histo(histo);
 gen_top_author_pie(pie_top);
 gen_top_author_modified_pie(pie_top_m);
 install_date_pickers('${pid}');
 get_commits('${pid}');
</script>
